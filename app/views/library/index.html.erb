<% if Current.user.books.count == 0 %>
  <div class="onboarding-banner">
    <div class="onboarding-content">
      <h2>ðŸ‘‹ Welcome to Book Match!</h2>
      <p>Here's how to get started:</p>
      <ol class="onboarding-steps">
        <li>Go to <%= link_to "Discover", books_path %> to find books you love</li>
        <li>Mark them as "I've Read" or "Want to Read"</li>
        <li>Rate the books you've finished</li>
        <li>We'll find readers with your taste and show you amazing recommendations!</li>
      </ol>
      <%= link_to "Start Discovering Books â†’", books_path, class: "btn btn-warm-primary btn-lg" %>
    </div>
  </div>
<% end %>

<div class="page-header">
  <h1>My Library</h1>
  <p>Track what you've read and discover your next favorite book</p>

  <div class="stats">
    <div class="stat">
      <div class="stat-number clickable-stat" data-tab-target="read">
        <%= @read_books.size %>
      </div>
      <div class="stat-label">Books Read</div>
    </div>

    <div class="stat">
      <div class="stat-number clickable-stat" data-tab-target="want-read">
        <%= @want_to_read_books.size %>
      </div>
      <div class="stat-label">Want to Read</div>
    </div>

    <div class="stat">
      <div>
      <%= link_to "#", class: "link-underline link-underline-opacity-0 stat-number", 
      data: { 
            "bs-toggle": "modal", 
            "bs-target": "#readers"
          } do %>
            <%= @readers_count %>
      <% end %>
      </div>
      <div class="stat-label">Readers Like You</div>
    </div>

  </div>
</div>

<!-- Book Search -->
<%= render "shared/search_bar"%>

<%= render "library/shelves",
           user: @user,
           read_books: @read_books,
           want_to_read_books: @want_to_read_books %>

<!-- Modal -->
<%=
  render "users/readers_modal",
    user: @user,
    readers: @readers,
    target: "#readers"
%>
